# PrimeTransfer Map App ‚Äì –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–¶–µ–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Google Maps API –¥–ª—è —Ç–æ–≥–æ, —â–æ–±:

- –æ–±–∏—Ä–∞—Ç–∏ –∞–¥—Ä–µ—Å–∏ —á–µ—Ä–µ–∑ –ø—ñ–¥–∫–∞–∑–∫–∏ –∞–±–æ –Ω–∞ –º–∞–ø—ñ
- –±—É–¥—É–≤–∞—Ç–∏ –º–∞—Ä—à—Ä—É—Ç –º—ñ–∂ —Ç–æ—á–∫–∞–º–∏ A —ñ B
- –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ –≤ –ø–∞–º'—è—Ç—ñ (LocalStorage)
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –¥–∞–Ω—ñ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üî∏ main.js

**–†–æ–ª—å:** –≥–æ–ª–æ–≤–Ω–∞ —Ç–æ—á–∫–∞ –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

- –Ü–º–ø–æ—Ä—Ç—É—î –≤—Å—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –º–æ–¥—É–ª—ñ (–∫–æ–Ω—Ç–∞–∫—Ç–∏, –º–æ–¥–∞–ª–∫–∏, —Ç–æ—â–æ)
- –í–∏–∫–ª–∏–∫–∞—î `initMap()` –∑ `map.js`

---

## üî∏ map.js

**–†–æ–ª—å:** —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏ –π –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏.

### –§—É–Ω–∫—Ü—ñ—ó:

- `initMap()`:
  1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î Google Maps API (`loadGoogleMaps()`)
  2. –Ü–º–ø–æ—Ä—Ç—É—î –ø–æ—Ç—Ä—ñ–±–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (`importLibrary(...)`)
  3. –°—Ç–≤–æ—Ä—é—î –∫–∞—Ä—Ç—É (`new Map(...)`)
  4. –í–∏–∫–ª–∏–∫–∞—î:
     - `setupInputs()` ‚Üí –ø–æ–ª—è –≤–≤–æ–¥—É –∞–¥—Ä–µ—Å
     - `initRouting()` ‚Üí –º–∞—Ä—à—Ä—É—Ç–∏
     - `restoreMarkers()` ‚Üí –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Ç–æ—á–∫–∏

---

## üî∏ loader.js

**–†–æ–ª—å:** –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Google Maps API.

### –§—É–Ω–∫—Ü—ñ—è:

- `loadGoogleMaps()`:
  - –°—Ç–≤–æ—Ä—é—î `<script>` –∑ API-–∫–ª—é—á–µ–º
  - –î–æ–¥–∞—î –π–æ–≥–æ –≤ `<head>`
  - –ü–æ–≤–µ—Ä—Ç–∞—î `Promise`, —è–∫–∏–π –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ

---

## üî∏ inputs.js

**–†–æ–ª—å:** –æ–±—Ä–æ–±–∫–∞ –∞–¥—Ä–µ—Å, –∫–ª—ñ–∫—ñ–≤, –∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è.

### –§—É–Ω–∫—Ü—ñ—ó:

- `setupInputs({ map, Marker, Autocomplete })`: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î Google Autocomplete,
  –¥–æ–¥–∞—î –æ–±—Ä–æ–±–∫—É –ø–æ–¥—ñ–π, –≤–≤–æ–¥—ñ–≤, –∫–Ω–æ–ø–æ–∫.

- `setFrom(place)` / `setTo(place)`:

  - –°—Ç–∞–≤–ª—è—Ç—å –º–∞—Ä–∫–µ—Ä–∏ A –∞–±–æ B –Ω–∞ –∫–∞—Ä—Ç—É
  - –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å –∞–¥—Ä–µ—Å—É –π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
  - –í–∏–∫–ª–∏–∫–∞—é—Ç—å:
    - `setFromPlace()` / `setToPlace()` –∑ `route.js`
    - `saveFormToLS()` –∑ `localStorage.js`

- `onMapClick(e)`:

  - –ü—Ä–∏ –∫–ª—ñ–∫—É –ø–æ –∫–∞—Ä—Ç—ñ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è
  - –°—Ç–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä A –∞–±–æ B, –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ä–µ–∂–∏–º—É

- `geocodeAddress(input, isFrom)`:

  - –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ –∞–¥—Ä–µ—Å—É –≤—Ä—É—á–Ω—É
  - –ì–µ–æ–∫–æ–¥—É—î —ó—ó —ñ —Å—Ç–∞–≤–∏—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –º–∞—Ä–∫–µ—Ä

- `setupButtons()`:

  - –ü—Ä–∏–≤'—è–∑—É—î –∫–Ω–æ–ø–∫–∏ "–≤–∏–±—Ä–∞—Ç–∏ –∑ –∫–∞—Ä—Ç–∏"
  - –ü–µ—Ä–µ–º–∏–∫–∞—î —Ä–µ–∂–∏–º `isSettingFrom`

- `enableCursorPickMode()`:
  - –î–æ–¥–∞—î CSS-–∫–ª–∞—Å –¥–ª—è –∑–º—ñ–Ω–∏ –∫—É—Ä—Å–æ—Ä—É –Ω–∞ –º–∞–ø—ñ

---

## üî∏ route.js

**–†–æ–ª—å:** –ø–æ–±—É–¥–æ–≤–∞ –º–∞—Ä—à—Ä—É—Ç—É, –≤—ñ–¥—Å—Ç–∞–Ω—å —ñ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –ø–æ—ó–∑–¥–∫–∏.

### –§—É–Ω–∫—Ü—ñ—ó:

- `initRouting(context)`:

  - –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î —Å–µ—Ä–≤—ñ—Å–∏: Directions, Renderer, DistanceMatrix
  - –ü—Ä–∏–≤'—è–∑—É—î –º–∞—Ä—à—Ä—É—Ç –¥–æ –∫–∞—Ä—Ç–∏

- `setFromPlace(place)` / `setToPlace(place)`:

  - –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å —Ç–æ—á–∫–∏ A —ñ B
  - –ó–∞–ø—É—Å–∫–∞—é—Ç—å `calculateAndDisplayRoute()`

- `calculateAndDisplayRoute()`:
  - –ë—É–¥—É—î –º–∞—Ä—à—Ä—É—Ç –∑ A –¥–æ B
  - –ú–∞–ª—é—î –π–æ–≥–æ –Ω–∞ –º–∞–ø—ñ
  - –†–æ–∑—Ä–∞—Ö–æ–≤—É—î —ñ –≤–∏–≤–æ–¥–∏—Ç—å:
    - –≤—ñ–¥—Å—Ç–∞–Ω—å —É `.map-km`
    - —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —É `.map-time`

---

## üî∏ markers.js

**–†–æ–ª—å:** –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

### –§—É–Ω–∫—Ü—ñ—è:

- `restoreMarkers()`:
  - –û—Ç—Ä–∏–º—É—î –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –∞–¥—Ä–µ—Å–∏/–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∑ `localStorage`
  - –ó–∞–ø–æ–≤–Ω—é—î —ñ–Ω–ø—É—Ç–∏
  - –í–∏–∫–ª–∏–∫–∞—î `setFromPlace()` / `setToPlace()` –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ –º–∞—Ä—à—Ä—É—Ç—É

---

## üî∏ localStorage.js

**–†–æ–ª—å:** –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —É –±—Ä–∞—É–∑–µ—Ä–Ω—ñ–π –ø–∞–º º—è—Ç—ñ.

### –§—É–Ω–∫—Ü—ñ—ó:

- `saveFormToLS({ fromAddress, toAddress, fromCoords, toCoords })` –ó–±–µ—Ä—ñ–≥–∞—î
  –∞–¥—Ä–µ—Å—É —ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤ LocalStorage –ø—ñ–¥ –∫–ª—é—á–µ–º `'form-data'`.

- `loadFormFromLS()` –ü–æ–≤–µ—Ä—Ç–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ —è–∫ –æ–± º—î–∫—Ç –∞–±–æ –ø–æ—Ä–æ–∂–Ω—ñ–π –æ–± º—î–∫—Ç.

- `saveLs(key, value)` –ó–∞–ø–∏—Å –±—É–¥—å-—è–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –≤–∫–∞–∑–∞–Ω–∏–º –∫–ª—é—á–µ–º.

- `loadLs(key)` –ß–∏—Ç–∞–Ω–Ω—è –±—É–¥—å-—è–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∫–ª—é—á–µ–º.

---
